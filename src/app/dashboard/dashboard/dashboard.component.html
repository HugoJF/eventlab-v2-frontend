<app-container>
  <div class="flex items-center justify-between">
    <app-title (click)="this.creatingEvent = !this.creatingEvent">TokenLab</app-title>
    <app-button (click)="this.modalService.setVisible(CREATING_EVENT, true)">Criar evento</app-button>
  </div>

  <div *ngIf="events.length === 0" class="w-full flex flex-col items-center space-y-4">
    <app-schedule></app-schedule>
    <h2 class="text-3xl font-black">Nenhum evento aqui!</h2>
    <app-button (click)="this.modalService.setVisible(CREATING_EVENT, true)">Criar evento</app-button>
  </div>

  <app-event-list
    *ngIf="events.length > 0"
    [events]="events"
    (onJoin)="handleOnJoin($event)"
    (onLeave)="handleOnLeave($event)"
    (onEdit)="handleOnEdit($event)"
    (onDelete)="handleOnDelete($event)"
  ></app-event-list>

  <app-modal-container *appModal="CREATING_EVENT">
    <app-event-form
      (onSubmit)="handleSubmit($event)"
      (onCancel)="this.modalService.setVisible(CREATING_EVENT, false)"
    ></app-event-form>
  </app-modal-container>

  <app-modal-confirm
    *appModal="LEAVING_EVENT"
    (onConfirmation)="this.onLeave(this.eventToLeave)"
    (onDismiss)="this.modalService.setVisible(LEAVING_EVENT, false)"
    action="Leave"
    title="Leaving event"
  >
    Are you sure you want to leave event <span class="font-medium">{{this.eventToLeave?.title}}</span>
  </app-modal-confirm>

  <app-modal-confirm
    *appModal="DELETING_EVENT"
    (onConfirmation)="this.onDelete(this.eventToDelete)"
    (onDismiss)="this.eventToDelete = undefined"
    action="Delete"
    title="Deleting event"
  >
    Are you sure you want to delete event <span class="font-medium">{{this.eventToDelete?.title}}</span>
  </app-modal-confirm>
</app-container>
